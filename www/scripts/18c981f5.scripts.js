"use strict";angular.module("steamcoopApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/compare/:playerOne&:playerTwo",{templateUrl:"views/compare.html",controller:"CompareCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("steamcoopApp").controller("MainCtrl",["$scope","$location","steamids","errors",function(a,b,c,d){a.steamids=c,a.errors=d,a.comparePlayers=function(){d.playerOne.empty=""===c.playerOne?!0:!1,d.playerTwo.empty=""===c.playerTwo?!0:!1,d.playerOne.notFound=!1,d.playerTwo.notFound=!1,d.playerOne.empty||d.playerTwo.empty||b.path("/compare/"+c.playerOne+"&"+c.playerTwo)}}]),angular.module("steamcoopApp").factory("games",["$http",function(a){return{getGames:function(){return a.get("/games")}}}]),angular.module("steamcoopApp").filter("gamesFilter",function(){var a=function(a,b){for(var c in b)if(b[c]&&-1===a.indexOf(c))return!1;return!0},b=function(a,b){var c=!0;for(var d in b)if(b[d]&&(c=!1,-1!==a.indexOf(d)))return!0;return c?!0:!1},c=function(a,b){var c=!0;for(var d in b)if(b[d]&&(c=!1,-1!==a.indexOf(d)))return!0;return c?!0:!1},d=function(a,b){var c=!0;for(var d in b)if(b[d]&&(c=!1,-1!==a.indexOf(d)))return!0;return c?!0:!1};return function(e,f){return e.filter(function(e){var g=a(e.players,f.players),h=b(e.platforms,f.platforms),i=c(e.categories,f.categories),j=d(e.genres,f.genres);return g&&h&&i&&j?!0:!1})}}),angular.module("steamcoopApp").factory("player",["$http",function(a){return{getPlayer:function(b){return a.get("/players/"+b)}}}]),angular.module("steamcoopApp").controller("CompareCtrl",["$scope","$routeParams","$http","$location","games","player","errors",function(a,b,c,d,e,f,g){a.games=[],a.platforms=[],a.categories=[],a.genres=[],a.filters={platforms:{},categories:{},genres:{},players:{}},a.players=[];var h=function(b){a.games=b.games,a.platforms=b.platforms;for(var c in b.platforms){var d=b.platforms[c];a.filters.platforms[d]=!1}a.categories=b.categories;for(var e in b.categories){var f=b.categories[e];a.filters.categories[f]=!1}a.genres=b.genres;for(var g in b.genres){var h=b.genres[g];a.filters.genres[h]=!1}},i=function(b){var c={steamID:b.steamID,steamID64:b.steamID64};a.players.push(c);for(var d in a.games)-1!==b.games.indexOf(a.games[d].appid)&&a.games[d].players.push(b.steamID64);a.filters.players[b.steamID64]=!0},j=function(a){"playerOne"===a&&(g.playerOne.notFound=!0),"playerTwo"===a&&(g.playerTwo.notFound=!0),d.path("/")};e.getGames().success(h),f.getPlayer(b.playerOne).success(i).error(function(){j("playerOne")}),f.getPlayer(b.playerTwo).success(i).error(function(){j("playerTwo")})}]),angular.module("steamcoopApp").value("errors",{playerOne:{empty:!1,notFound:!1},playerTwo:{empty:!1,notFound:!1}}),angular.module("steamcoopApp").value("steamids",{playerOne:"",playerTwo:""});